(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{196:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(66),o={articleList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";return"feed"===e?Object(n.b)({url:"/api/articles/feed",params:t,method:"GET"}):Object(n.b)({url:"/api/articles",params:t,method:"GET"})},getTags:function(){return Object(n.b)({method:"GET",url:"/api/tags"})},favor:function(t){return Object(n.b)({method:"POST",url:"/api/articles/".concat(t,"/favorite")})},unfavor:function(t){return Object(n.b)({method:"DELETE",url:"/api/articles/".concat(t,"/favorite")})},getArticle:function(t){return Object(n.b)({method:"GET",url:"/api/articles/".concat(t)})},createArticle:function(article){return Object(n.b)({method:"POST",url:"/api/articles",data:{article:article}})},delArticle:function(t){return Object(n.b)({method:"DELETE",url:"/api/articles/".concat(t)})},updateArticle:function(article,t){return Object(n.b)({method:"PUT",url:"/api/articles/".concat(t),data:{article:article}})},addComment:function(t,e){return Object(n.b)({method:"POST",url:"/api/articles/".concat(e,"/comments"),data:{comment:{body:t}}})},getComment:function(t){return Object(n.b)({method:"GET",url:"/api/articles/".concat(t,"/comments")})},delComment:function(t,e){return Object(n.b)({method:"DELETE",url:"/api/articles/".concat(t,"/comments/").concat(e)})}}},198:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));r(34),r(32);function n(t,e){return e.reduce((function(e,r){return e[r]=t[r],e}),{})}function o(t){var e=t.errors;if(e){var r=Object.keys(e).reduce((function(t,r){return t.push("".concat(r,":")+e[r].join(",")),t}),[]);if(r.length>0)return r}}},276:function(t,e,r){"use strict";r.r(e);var n=r(4),article=(r(14),r(52),r(68),r(55),r(43),r(196)),o=r(198),c={middleware:["auth"],data:function(){return{form:{title:"",description:"",body:"",tagList:[]},errorList:[],isEditor:!1,slug:"",tag:""}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,data,o,title,body,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.$route.query.slug)){e.next=9;break}return e.next=4,article.a.getArticle(r);case 4:n=e.sent,data=n.data,t.isEditor=!0,t.slug=r,data&&(o=data.article,title=o.title,body=o.body,c=o.description,l=o.tagList,t.form={title:title,body:body,description:c,tagList:l});case 9:case"end":return e.stop()}}),e)})))()},methods:{submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var form,r,n,data,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return form=Object.assign(t.form),r=t.isEditor?"updateArticle":"createArticle",e.next=4,article.a[r](form,t.slug).catch((function(e){var r=Object(o.b)(e.data);return r&&(t.errorList=r),Promise.resolve({})}));case 4:n=e.sent,(data=n.data)&&data.article&&(c=t.$store.state.user.user.username,t.$router.replace("/article/".concat(data.article.slug,"?uname=").concat(c)));case 7:case"end":return e.stop()}}),e)})))()},removeTag:function(t){var e=this.form.tagList,r=e.indexOf(t);e.splice(r,1)},addTag:function(){if("number"==typeof this.tag||this.tag){var t=this.form.tagList;t.includes(this.tag)||t.push(this.tag),this.tag=""}}}},l=r(10),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"editor-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-10 offset-md-1 col-xs-12"},[r("ul",{staticClass:"error-messages"},t._l(t.errorList,(function(e){return r("li",{key:e},[t._v(t._s(e))])})),0),t._v(" "),r("form",{on:{submit:function(t){t.preventDefault()},keyup:function(t){return 13!=t.keyCode}}},[r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Article Title"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"What's this article about?"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.body,expression:"form.body"}],staticClass:"form-control",attrs:{rows:"8",placeholder:"Write your article (in markdown)"},domProps:{value:t.form.body},on:{input:function(e){e.target.composing||t.$set(t.form,"body",e.target.value)}}})]),t._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"form-control",attrs:{type:"text",placeholder:"enter tag"},domProps:{value:t.tag},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addTag(e))},input:function(e){e.target.composing||(t.tag=e.target.value)}}}),t._v(" "),r("div",{staticClass:"tag-list"},t._l(t.form.tagList,(function(e){return r("span",{key:e,staticClass:"tag-default tag-pill ng-binding ng-scope",attrs:{"ng-repeat":"tag in $ctrl.article.tagList"}},[r("i",{staticClass:"ion-close-round",on:{click:function(r){return t.removeTag(e)}}}),t._v("\n                  "+t._s(e)+"\n                ")])})),0)]),t._v(" "),r("button",{staticClass:"btn btn-lg pull-xs-right btn-primary",attrs:{type:"button"},on:{click:t.submit}},[t._v("\n              Publish Article\n            ")])])])])])])}),[],!1,null,null,null);e.default=component.exports}}]);