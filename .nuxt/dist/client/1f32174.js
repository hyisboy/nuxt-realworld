(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{197:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(66),o={login:function(e){return Object(n.b)({url:"/api/users/login",data:{user:e},method:"POST"})},register:function(e){return Object(n.b)({url:"/api/users",data:{user:e},method:"POST"})},updateUser:function(e){return Object(n.b)({url:"/api/user",method:"PUT",data:{user:e}})},getUser:function(){return Object(n.b)({url:"/api/user",method:"GET"})},getProfile:function(e){return Object(n.b)({url:"/api/profiles/"+e,method:"GET"})},followUser:function(e){return Object(n.b)({url:"/api/profiles/".concat(e,"/follow"),method:"POST"})},unfollowUser:function(e){return Object(n.b)({url:"/api/profiles/".concat(e,"/follow"),method:"DELETE"})}}},198:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));r(34),r(32);function n(e,t){return t.reduce((function(t,r){return t[r]=e[r],t}),{})}function o(e){var t=e.errors;if(t){var r=Object.keys(t).reduce((function(e,r){return e.push("".concat(r,":")+t[r].join(",")),e}),[]);if(r.length>0)return r}}},272:function(e,t,r){"use strict";r.r(t);var n=r(4),o=(r(43),r(28),r(14),r(52),r(197)),c=r(198),l={name:"login",data:function(){return{form:{email:"",username:"",password:""},errorList:[]}},computed:{isLogin:function(){return"login"==this.$route.name}},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.app,console.log(r.store.state.user,"xxxuser in cookie"),t.abrupt("return",{});case 3:case"end":return t.stop()}}),t)})))()},beforeCreate:function(){console.log("beforeCreate")},created:function(){console.log("created")},methods:{onSubmit:function(e){this.isLogin?this.toLogin():this.toRegister()},toLogin:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(c.a)(e.form,["email","password"]),t.next=3,o.a.login(r).catch((function(t){var r=Object(c.b)(t.data);return r&&(e.errorList=r),Promise.resolve({})}));case 3:n=t.sent,(data=n.data)&&(e.errorList=[],e.$store.commit("user/setUser",data.user),e.$router.push("/"));case 6:case"end":return t.stop()}}),t)})))()},toRegister:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.register(e.form).catch((function(t){var r=Object(c.b)(t.data);return r&&(e.errorList=r),Promise.resolve({})}));case 2:r=t.sent,(data=r.data)&&data.user&&(e.$router.replace("/login"),e.errorList=[]);case 5:case"end":return t.stop()}}),t)})))()}}},m=r(10),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"auth-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 offset-md-3 col-xs-12"},[r("h1",{staticClass:"text-xs-center"},[e._v(e._s(e.isLogin?"Sign In":"Sign Up"))]),e._v(" "),r("p",{staticClass:"text-xs-center"},[e.isLogin?r("nuxt-link",{attrs:{to:"/register"}},[e._v("to create account?")]):r("nuxt-link",{attrs:{to:"/login"}},[e._v("Have an account?")])],1),e._v(" "),r("ul",{staticClass:"error-messages"},e._l(e.errorList,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.isLogin?e._e():r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Your Name",required:""},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),e._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),e._v(" "),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn btn-lg btn-primary pull-xs-right"},[e._v("\n            Sign up\n          ")])])])])])])}),[],!1,null,null,null);t.default=component.exports}}]);